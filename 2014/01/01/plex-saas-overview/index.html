<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml"><head><meta content="text/html; charset=UTF-8" http-equiv="content-type" /><meta name="description" /><meta content="plex media.server personal" name="keywords" /><meta content="yacn" name="author" /><meta content="width=device-width, initial-scale=1.0" name="viewport" /><link href="/rss-feed" rel="alternate" title="RSS Feed" type="application/rss+xml" /><link href="/img/favicon.ico" rel="icon" type="image/x-icon" /><link href="/img/favicon.ico" rel="shortcut icon" type="image/x-icon" /><link href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/3.2.1/css/font-awesome.min.css" rel="stylesheet" type="text/css" /><link href="//fonts.googleapis.com/css?family=Source+Code+Pro|Open+Sans" rel="stylesheet" type="text/css" /><link href="/css/bootstrap.min.css" rel="stylesheet" type="text/css" /><link href="/css/yacn.css" rel="stylesheet" type="text/css" /><title>Automated Media Server Overview</title></head><body><div class="header"><nav class="navbar navbar-inverse navbar-fixed-top" role="navigation"><div class="container"><div class="navbar-header"><button class="navbar-toggle" data-target=".navbar-ex1-collapse" data-toggle="collapse" type="button"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a class="navbar-brand" href="/index.html">YACN</a></div><div class="collapse navbar-collapse navbar-ex1-collapse"><ul class="nav navbar-nav"><li><a href="/blog.html">Blog</a></li><li><a href="/is3500/blog.html">IS3500 Blog</a></li><li><a href="/projects.html">Projects</a></li><li><a href="/about.html">About</a></li></ul><ul class="nav navbar-nav navbar-right"><li><a class="icon-header" href="https://github.com/yacn"><i class="icon-github icon-2x"></i></a><li><a class="icon-header" href="https://twitter.com/yaclevername"><i class="icon-twitter icon-2x"></i></a><li><a class="icon-header" href="https://www.linkedin.com/in/idboehman"><i class="icon-linkedin icon-2x"></i></a><li><a class="icon-header" href="http://yacn.me/rss-feed"><i class="icon-rss icon-2x"></i></a></li></li></li></li></ul></div></div></nav></div><div class="content"><div class="container"><div class="row"><div class="col-md-12"><h2>Automated Media Server Overview</h2><p>In this inagural post, I will give a general overview of how I structured the infrastructure for my media server. First, a brief overview of my infrastructure. The systems below marked with <code>VM</code> are virtual machines hosted on an ESXi box:</p>
<ul>
  <li>Windows Server 2012 <code>VM</code>
  <ul>
    <li>Runs Plex Media Server and serves DNS requests for the network</li>
  </ul></li>
  <li>Ubuntu 12.04 <code>VM</code>
  <ul>
    <li>Runs Sick Beard, CouchPotato, and r(u)torrent</li>
  </ul></li>
  <li>Synology DS413j
  <ul>
    <li>This is my NAS, holding 4x 3TB drives formatted with Synology Hybrid Raid  for 1 drive redundancy</li>
  </ul></li>
</ul><h3>System Overviews</h3><h4>Windows Server 2012 <code>VM</code></h4><p>This box runs Plex Media Server (PMS), which organizes and fetches metadata for all of my media automatically. I chose Windows Server to host this service since at the time, PMS for Linux was beta software and there was no Silverlight support for Linux, meaning I would not be able to run the Netflix channel. This may have changed since then, but I have not looked into it recently. Now, PMS for Linux is out of beta and the Netflix channel has been broken for ages, which I never used anyways because my Roku has a native channel for Netflix. Because of these developments, I am looking into switching back to an all Ubuntu setup as I am a Linux guy at heart, and it will make my future plans easier to implement.</p><p>Additionally, this VM is running the Windows DNS server. I decied to use this over a traditional solution like BIND or dnsmasq mainly due to ease of use. Once I migrate PMS to Ubuntu, I will setup BIND or something similar as there would be no point in running an entire Windows VM just for DNS.</p><h4>Ubuntu 12.04 <code>VM</code></h4><p>This box takes care of the grunt work of the operation. It runs rtorrent, rutorrent, Sick Beard, CouchPotato, and Subsonic. This medly of software takes care of downloading (r(u)torrent), renaming and moving (Sick Beard and CouchPotato), and serving music (Subsonic).</p><p><a href="http://sickbeard.com">Sick Beard</a> is a Python webapp built on CherryPy which searches for and manages all of the TV shows I watch. <a href="https://couchpota.to">CouchPotato</a> is a similar webapp also written in Python and based on Tornado, but for movies instead of TV.</p><p><a href="http://libtorrent.rakshasa.no">rTorrent</a> is an ncurses based torrent client I run as a daemon in the background using GNU screen. <a href="https://code.google.com/p/rutorrent/">ruTorrent</a> is a web-frontend to rTorrent built in PHP that can be extended via plugins. I use several, such as <a href="https://code.google.com/p/rutorrent/wiki/PluginRatio">Ratio</a>, <a href="https://code.google.com/p/rutorrent/wiki/PluginAutotools">AutoTools</a>, and <a href="https://code.google.com/p/rutorrent/wiki/PluginScheduler">Scheduler</a> to enhance and improve my workflow. The workflow itself is a tad complex, so it will be discussed in a later post.</p><p><a href="http://subsonic.org">Subsonic</a> is a free web-based media streamer which allows me to stream my music collection from anywhere.</p><h4>Synology DS413j</h4><p>All of the systems listed above are accessing, using, and manipulating a lot of data, but none of it, except for software-related files (such as the SQLite dbs used by Plex, Sick Beard, and CouchPotato), is actually stored on those systems. Each of them are mounting shared folders which are located on this NAS. I have Synology Hybrid Raid setup to allow me to add bigger drives incrementally in the as well as giving myself a 1-drive redundancy safety net. Using the software on the Synology itself, I am able to share these folders over my network via NFS, CIFS, and AFP.</p><h3>Plans for the Future</h3>
<ul>
  <li>Migrate to PMS on Ubuntu</li>
  <li>Migrate DNS server to BIND or something similar</li>
  <li>Implement Chef to automate provisioning of these systems</li>
  <li>Move from ESXi to OpenStack</li>
  <li>Implement Sensu or Riemann to monitor the above servers and apps</li>
</ul><div id="post-tags">Tags: <a href="/tags/#plex">plex </a><a href="/tags/#media.server">media.server </a><a href="/tags/#personal">personal </a></div><div class="shares"><a class="twitter-share-button" data-via="yaclevername" href="https://twitter.com/share">Tweet</a></div><br /><div id="disqus_thread"></div><script type="text/javascript">var disqus_shortname = 'yacn';var disqus_identifier = 'http://yacn.me' + window.location.pathname;var disqus_url = disqus_identifier;(function() {var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);})();</script><script type="text/javascript">!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script></div></div><script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script><script src="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.0.3/js/bootstrap.min.js"></script><script src="//cdnjs.cloudflare.com/ajax/libs/prettify/r298/prettify.js"></script><script src="/js/yacn.js"></script><div class="footer"><div class="container"><div class="row"><div class="col-md-12"><p>Built with <a href="https://getbootstrap.com/">Bootstrap</a> and <a href="https://github.com/nakkaya/static">Static</a>. Based off of <a href="http://crsmithdev.com">Chris Smith</a>'s site<br />&copy; 2014 <a href="http://yacn.me">Yet Another Clever Name</a></p></div></div></div></div></div></div></body></html>